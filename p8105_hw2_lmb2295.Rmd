---
title: "Homework 1"
author: "Laya Buchanan"

date: 2020-09-21
output: github_document
---

This is my submission for the second homework assignment for P8105.  


```{r message = FALSE, echo = FALSE}
library(tidyverse)
library(readxl)
```


# Problem 1: Mr Trash Wheel


```{r}

```

# Problem 2: NYC Transit Data

## Read in the data

Read in the NYC Transit dataset. 

```{r message = FALSE}
transit_df = read_csv("./data/NYC_Transit_Data.csv")
```

## Clean the data

Clean up column names:

```{r warning = FALSE, message = FALSE, results = "hide"}
transit_df = janitor::clean_names(transit_df)
```

Select relevant variables and convert the entry variable from character to logical:
```{r message = FALSE, results = "hide"}
transit_df =
  select( transit_df, line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, entrance_type, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))

```

This data now contains the variables: line, station name, station latitude, station longitude, whether entry is allowed, whether vending exists, entrance type, and ADA compliance, as well as routes #2-11 existing as their own variables. So far, I have cleaned the column names and converted the "entry" variable from a character variable to a logical variable. There are 19 total columns and 1,868 observations in this dataset. These data are mostly tidy, however, it would be better if route number and route name were distinct variables.


## Problem questions

This code creates a table that only lists distinct stations:
```{r}
stations_df = 
  distinct(transit_df,line, station_name, .keep_all = TRUE)

```

There are 465 unique stations.


This code creates a table that only lists distinct stations that are ADA compliant

```{r}
ada_df =
  filter(stations_df, ada == TRUE)
```

84 stations are ADA compliant.


This code creates a table that only lists station entrances/exits without vending
```{r}
vending_df = 
  transit_df %>% 
  mutate(vending = recode(vending, "YES" = TRUE, "NO" = FALSE)) %>% 
  filter(vending == FALSE)
```

There are 183 station entrances/exits without vending.


This code creates a table that only lists station entrances/exits without vending that also allow entrance.
```{r}
allow_df = 
  vending_df %>% 
  filter(entry == TRUE)
```

There are 69 entrances/exits without vending that also allow entrance.

As there are 183 station entrances/exits without vending and only 69 of them allow entrance, we can conclude that `r (69/183)*100`% of station entrances / exits without vending allow entrance.

This code reformats the transit_df dataset so that the route number and route name are distinct variables.
```{r}
route_name_df = 
  transit_df %>% 
    mutate(route8 = recode(route8, `1` = "1", `2` = "2", `3` = "3", `4` = "4", `5` = "5",`6` = "6", `7` = "7")) %>% 
  mutate(route9 = recode(route9, `1` = "1", `2` = "2", `3` = "3", `4` = "4", `5` = "5", `6` = "6",`7` = "7")) %>% 
  mutate(route10 = recode(route10, `1` = "1", `2` = "2", `3` = "3", `4` = "4", `5` = "5",`6` = "6", `7` = "7")) %>% 
  mutate(route11 = recode(route11, `1` = "1", `2` = "2", `3` = "3", `4` = "4", `5` = "5",`6` = "6", `7` = "7")) %>%
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    names_prefix = "route",
    values_to = "route_name"
  )
  
```


This code creates a dataset of only distinct stations that serve the A train.
```{r}
a_train_df= 
  route_name_df %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(route_name == "A")
```
There are 60 distinct stations that serve the A train.


This code creates a dataset of the 60 distinct stations described above that are ADA compliant.
```{r}
ada_A_df =
  filter(a_train_df, ada == TRUE)
```
Of the 60 distinct stations that serve the A train, 17 are ADA compliant.

# Problem 3: FiveThirtyEight Data

## Read in the data

Read in the the FiveThirtyEight data

```{r message = FALSE, results = "hide"}
pols_month = read_csv("./data/pols_month.csv")
snp = read_csv("./data/snp.csv")
unemployment = read_csv("./data/unemployment.csv")
```

## Clean the data

Clean up column names, separate the mon variable in pols_month into integer variables year, month, and day:

```{r message = FALSE, results = "hide"}
pols_month =
  janitor::clean_names(pols_month) %>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(month = recode(month, `01` = "january", `02` = "february",  `03` = "march", `04` = "april", `05` = "may", `06` = "june", `07` = "july", `08` = "august", `09` = "september", `10` = "october", `11` = "november", `12` = "december",)) %>% 
  relocate(prez_dem, .after = prez_gop) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "president",
    names_prefix = "prez_"
  ) %>% 
  select(-day) %>% 
  arrange(year, month)

snp = 
  janitor::clean_names(snp) %>% 
  separate(date, into = c("month", "day", "year")) %>%
  mutate(month = recode(month, `1` = "january", `2` = "february",  `3` = "march", `4` = "april", `5` = "may", `6` = "june", `7` = "july", `8` = "august", `9` = "september", `10` = "october", `11` = "november", `12` = "december")) %>%
  select(-day) %>% 
  relocate(month, .after = year) %>% 
  arrange(year, month)


unemployment = janitor::clean_names(unemployment)
```
